<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Certamen Filter</title>
  <style>
    .container {
      padding: 20px;
      max-width: 600px;
      margin: 0 auto;
    }
    textarea {
      width: 100%;
      height: 150px;
      margin-top: 10px;
    }
    .output-card {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ccc;
      background-color: #f9f9f9;
    }
    pre {
      white-space: pre-wrap;
      word-wrap: break-word;
      font-size: 14px;
    }
    button {
      margin-top: 10px;
      padding: 10px 20px;
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
    }
    input[type="file"] {
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <input type="file" id="fileInput" accept=".txt" />
    <textarea id="inputText" placeholder="Paste Certamen questions here..."></textarea>
    <button id="processButton">Process</button>
    <div id="output" class="output-card" style="display:none;">
      <pre id="jsonOutput"></pre>
    </div>
  </div>

  <script>
    
    
    function categorizeQuestion(text) {
      if (/|gods|Zeus|Hera|Poseidon|Hades|Demeter|Hestia|Ares|Hephaestus|Apollo|Artemis|Athena|Aphrodite|Hermes|Dionysus|Persephone|heroes|Theseus|Perseus|Heracles|Achilles|Aeneas|Hector|Paris|Cassandra|Helenus|Agamemnon|Menelaus|Orestes|Electra|Iphigenia|Jason|Odysseus|Medea|Daphne|Ariadne|Phaedra|Astyanax|Ascanius (Iulus)|Andromeda|Dionysus|Hermes|Apollo|Artemis|Sarpedon|Minos|Rhadamanthys|Aeacus|Helen|Polydeuces|Clytemnestra|Castor|Telemachus|mythological people|Arachne|Atalanta|Midas|Icarus|Bellerophon|Phaethon|Deucalion|Pyrrha|Baucis|Philemon|Pyramus|Thisbe|Aurora|Tithonus|Meleager|Ixion|Tityus|Sisyphus|Tantalus|Danaids|Megaera|Iphicles|Amphitryon|Eurystheus|Deianeira|Nessus|Philoctetes|Hebe|Aeson|Pelias|Chiron|Phrixus|Helle|Aeetes|Absyrtus|Glauce|Aethra|Aegeus|Periphites|Sinis|Sciron|Procrustes|Androgeos|Daedalus|Minos|Ariadne|Acrisius|Danae|Dictys|Polydectes|Medusa|Graiae|Nymphs of the North (Stygian Nymphs)|Euryale|Stheno|Chrysaor|Ethiopia|Cepheus|Cassiopeia|Nereid|Thetis|Ceto|Phineus|Muses|Calliope|Clio|Erato|Euterpe|Melpomene|Polyhymnia|Terpsichore|Thaleia|Urania|Graces (Charites)|Aglaia|Euphrosyne|Thalia|Fates|moirae|Clotho|Lachesis|Atropos|Furies|erinyes|Alecto|Megaera|Tisiphone|Rivers in the Underworld|Styx|Lethe|Phlegethon|Cocytus|Acheron|Monsters|Charybdis|Chimera|Cerberus|Centaur|Echidna|Orthus|Satyr|Scylla|Polyphemus|Cyclops|Homeric Heroes (Greeks)|Menelaus|Agamemnon|Achilles|Ajax the Greater|Homeric Heroes (Trojans)|Priam|Hecuba|Hector|Paris|Underworld|gods|Artemis|Zeus|heroes|myth/i.test(text)) return "Myth";
      if (/war||Romulus|Numa Pompilius|Tullus Hostilius|Ancus Marcius|Tarquinius Priscus|Servius Tullius|Tarquinius Superbus|Republic (Consuls)|Lucius Iunius Brutus|Lucius Tarquinius Collatinus|Publius Valerius Publicola (Poplicola)|dictators|Aulus Postumius Albinus|Lucius Quinctius Cincinnatus|Gaius Marcius Rutilus|Quintus Hortensius|generals|military figures|Marcus Furius Camillus|Brennus|Publius Decius Mus|Titus Manlius Torquatus|Gavius Pontius|Quintus Fabius Maximus Rullianus|Pyrrhus|Curius Dentatus|Gaius Duilius|Atilius Regulus|Manlius Vulso|Xanthippus|Publius Claudius Pulcher|Adherbal|Lutatius Catulus|Hanno the Great|Hannibal|Publius Cornelius Scipio (the elder)|Tiberius Sempronius Longus|Gaius Flaminius|Quintus Fabius Maximus Cunctator|Gaius Terentius Varro|Lucius Aemilius Paullus|Marcus Claudius Marcellus|Gaius Claudius Nero|Marcus Livius Salinator|Hasdrubal Barca|Scipio Africanus|Gaius Laelius|Massinissa|Syphax|Scipio Aemilianus|Viriathus|Queen Teuta|Demetrius of Pharos|Titus Quinctius Flamininus|Phillip V of Macedon|Antiochus III|Manius Acilius Glabrio|Lucius Cornelius Scipio Asiasticus|Lucius Aemilius Paullus|King Perseus of Macedon|Quintus Caecilius Metellus Macedonicus|Andriscus|Lucius Mummius|Gaius Marius|Lucius Cornelius Sulla “Felix”|Bocchus I|Servilius Caepio|Mallius Maximus|Lutatius Catullus|Mithridates VI of Pontus|Licinius Murena|Spartacus|Marcus Licinius Crassus|Pompey the Great|Lucius Licinius Lucullus|Tigranes the great|Julius Caesar|Marcus Agrippa|Titus Labienus|Marcus Junius Brutus|Gaius Cassius Longinus|Gaius Octavius (Augustus)|Marcus Aemilius Lepidus|Mark Antony (Marcus Antonius)|Sextus Pompeius|Arminius (of the Cherusci)|Gnaeus Domitius Corbulo|Boudicca|Suetonius Paulinus|political figures|Rhea Silvia|Mars|Numitor|Amulius|Remus|Faustulus|Acca Larentia|Tarpeia|Hersilia|Titus Tatius|Numa Pompilius|Egeria|Mettius Fufetius|Ancus Marcius|Lucumo (Tarquinius Priscus)|Demaratus|Tanaquil|Servius Tullius|Tarquinia|Tullia the Younger|Lucius Tarquinius Superbus|Sextus Tarquinius|Lucius Tarquinius Collatinus|Lucius Iunius Brutus|Publius Valerius Publicola (Poplicola)|Lucretius|Menenius Agrippa|Minucius|Gnaeus Marcius Coriolanus|Veturia|Volumnia|decemviri|Appius Claudius Crassus|Verginia|Gaius Canuleius|C. Licinius Stolo|Lucius Sextius|Q. Publilius Philo|Attalus III|Cornelia|Tiberius Gracchus|Marcus Octavius|Scipio Nasica|Gaius Gracchus|Lucius Opimius|Micipsa|Hiempsal|Adherbal|Jugurtha|Lucius Appuleius Saturninus|Papirius Carbo|Cornelius Cinna|Sertorius|Marcus Perperna|Aulus Gabinius|Gaius Manilius|Lucius Sergius Catilina|Cicero|Julia|Bibulus|Clodius Pulcher|Milo|Vercingetorix|Cleopatra VII|Julia (daughter of Augustus)|Livia|Tiberius (emperor)|Germanicus|Calpurnius Piso|Aelius Sejanus|Sutorius Macro|Tiberius Gemellus|Caligula|Cassius Chaerea|Claudius|Narcissus|Pallas|Callistus|Valeria Messalina|Britannicus|C. Silius|Agrippina the Younger|Gnaeus Domitius Ahenobarbus|Nero|Locusta|Tigellinus|Nymphidius Sabinus|Galba|battle|Hannibal|Theodosius|Attalus|Servile|Sulla|Marius|Strabo|Sertorius|Pompey/i.test(text)) return "History";
      if (/word|Greek|sentence|grammar|noun|verb|derivative|participle|ablative|dative|genitive|declension|subjunctive|motto|differentiate|meaning|grex|prex|nimis|nemus|ars|artus/i.test(text)) return "Language";
      const literatureRegex = /caesar|ovid|cicero|vergil|horace|livy|quintus ennius|tacitus|cato the elder|catullus|juvenal|plautus|lucretius|naevius|sallust|martial|terence|quintillian|augustine|jerome|petronius|pliny the younger|propertius|seneca the younger|silius italicus|mimes|suetonius|lucan|apuleius|tibullus|accius|atellan farce|livius andronicus|theater in general|varro reatinus|ambrose|persius|caecilius statius|gallus|lactantius|lucilius|nepos|pacuvius|statius|pliny the elder|gellius|tertullian|atticus|maecenas|symmachus|eusebius|ammianus marcellinus|frontinus|ausonius|vitruvius|syrus|polybius|fabius pictor|laberius|appius claudius caecus|valerius cato|varius rufus|hyginus|asinius pollio|celsus|valerius flaccus|phaedrus|macrobius|historiae augustae|minucius felix|caesar strabo|florus|columella|seneca the elder|remmius palaemon|varro atacinnus|volcacius sedigitus|commodian|licinius calvus|verrius flaccus|valerius maximus|manilius|cornelius sisenna|coelius antipater|afranius|aelius stilo|cinna|plutarch|fronto|ulpian|cyprian|cato the younger|pomponius porphyrio|papinian|maximian|martianus capella|eutropius|cassius dio|prudentius|arnobius|boethius|aelius donatus|the venerable bede|lutatius catulus|rutilius rufus|panaetius|coruncanius|licinius macer|quadrigarius|cincius alimentus|calpurnius piso frugi|atta|aemilius scaurus|mamercus|quintus cicero|nigidius figulus|furius bibaculus|velleius paterculus|scribonius largus|curtius rufus|pomponius mela|pompeius trogus|apicius|titus labienus|strabo|josephus|diodorus siculus|cremutius cordus|calpurnius siculus|asconius pedianus|albinovanus pedo|testamentum porcelli|victorinus|vegetius|sulpicius severus|paulus|orosious|novatian|perpetua|sidonius apollinaris|aurelius victor|querolus|procopius|paulinus of nola|nemesianus|galen|gaius the jurist|cassiodorus|claudius claudian|tiberius claudius donatus|pervigilium veneris|p. mucius scaevola|q. mucius scaevola augur|q. mucius scaevola pontifex|chiron centaurus|volusius|isidore|valerius antias|lucius acilius|sulpicius gallus|titinius|quintus valerius of sora|sempronius asellio|sempronius tuditanus|postumius albinus|manius manilius|mago|luscius lanuvinus|gaius acilius|cato licinanus|aurelius opillus|aelius paetus|rhetorica ad herennium|laevius|epidius|cornelius severus|rabirius|capito|caecilius epirota|vipstanus messalla|valerius probus|dio cocceianus|victor of vita|vibius sequester|vespa|venantius fortunatus|rutillus namatianus|servius honoratus|scriptores historiae augustae|sammonicus|salvian|rufinus of aquileia|quodvultdeus|plotius sacerdos|hostidius geta|palladius|nonius marcellus|merobaudes|marcellus empiricus|juvencus|julius solinus|hilary of poitiers|herodian|gregory the great|gregory of tours|granius licinianus|gargilius martial|fulgentius|firmicus maternus|epictetus|ennodius|dracontius|dicta catonis|dares and dictys|cyprianus gallus|charisius|censorinus|cassian|caelius sedulius|avianus|catullus \(phasma \+ laureolus\)|paulinus of pella|rufius festus|caesius bassus|sulpicius apollinaris|vennonius|santra|gnaeus gellius|furius of antias|gaius fannius|cassius hemina|p. licinius tegula|porcius licinius|pompilius|sextilius ena|antonius gnipho|ateius praetextatus|fenestella|labeo|servilius nonianus|laus pisonis|aemilius asper|remius favinus|prosper of aquitane|priscian|porfyrius|acta martyrum scillitanorum|peregrinatio aetharia|modestinus|julius obsequens|julian of eclanum|hegesippus|gennadius|corippus|caesellius vindex|benedict of nursia|avitus|avienus|arator|ampelius|valerius aedituus|atilius|sextus turpilius|trabea|optatianus|marcus actorus naso|statius ursulus/i;
         if (literatureRegex.test(text)) return "Literature";

      return "Uncategorized";
    }

    function isAllCaps(text) {
      const words = text.split(' ');
      const firstWord = words[0];
      const restWords = words.slice(1);
      return firstWord === firstWord.toUpperCase() && restWords.every(word => word === word.toLowerCase() || word === word.toUpperCase());
    }

function processText() {
  const inputText = document.getElementById('inputText').value;
  const lines = inputText.split("\n");
  const questions = [];

  let buffer = "";

  function pushBufferedQuestion() {
    if (!buffer) return;

    //  to split buffer into question and answer
    const match = buffer.match(/^(.*?\?)\s*(.+)$/s);
    if (match) {
      const q = match[1].trim();
      const a = match[2].trim();
      questions.push({
        category: categorizeQuestion(q),
        question: q,
        answer: a
      });
    }

    buffer = "";
  }

  for (let line of lines) {
    line = line.trim();
    if (!line || /score check/i.test(line)) continue;

    //  a new question
    if (/^\d+\.\s|^B\d:/.test(line)) {
      pushBufferedQuestion();
      buffer = line.replace(/^\d+\.\s|^B\d:\s*/, '');
    } else {
      buffer += " " + line;
    }
  }

  //  any remaining question
  pushBufferedQuestion();

  //  output
  document.getElementById('jsonOutput').textContent = JSON.stringify(questions, null, 2);
  document.getElementById('output').style.display = 'block';
}


    document.getElementById('fileInput').addEventListener('change', function(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          document.getElementById('inputText').value = e.target.result;
        };
        reader.readAsText(file);
      }
    });

    document.getElementById('processButton').addEventListener('click', processText);
  </script>
</body>
</html>
