<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Certamen Filter</title>
  <style>
    .container {
      padding: 20px;
      max-width: 600px;
      margin: 0 auto;
    }
    textarea {
      width: 100%;
      height: 150px;
      margin-top: 10px;
    }
    .output-card {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ccc;
      background-color: #f9f9f9;
    }
    pre {
      white-space: pre-wrap;
      word-wrap: break-word;
      font-size: 14px;
    }
    button {
      margin-top: 10px;
      padding: 10px 20px;
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
    }
    input[type="file"] {
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <input type="file" id="fileInput" accept=".txt" />
    <textarea id="inputText" placeholder="Paste Certamen questions here..."></textarea>
    <button id="processButton">Process</button>
    <div id="output" class="output-card" style="display:none;">
      <pre id="jsonOutput"></pre>
    </div>
  </div>

  <script>
    
    const authors = [
    "caesar","ovid","cicero","vergil","horace","livy","quintus ennius","tacitus","cato the elder",
    "catullus","juvenal","plautus","lucretius","naevius","sallust","martial","terence",
    "quintillian","augustine","jerome","petronius","pliny the younger","propertius",
    "seneca the younger","silius italicus","suetonius","lucan","apuleius","tibullus",
    "accius","livius andronicus","varro reatinus","ambrose","persius","caecilius statius",
    "gallus","lactantius","lucilius","nepos","pacuvius","statius","pliny the elder",
    "gellius","tertullian","atticus","maecenas","symmachus","eusebius",
    "ammianus marcellinus","frontinus","ausonius","vitruvius","syrus","polybius",
    "fabius pictor","laberius","appius claudius caecus","valerius cato","varius rufus",
    "hyginus","asinius pollio","celsus","valerius flaccus","phaedrus","macrobius",
    "historiae augustae","minucius felix","caesar strabo","florus","columella",
    "seneca the elder","remmius palaemon","varro atacinius","volcacius sedigitus",
    "commodian","licinius calvus","verrius flaccus","valerius maximus","manilius",
    "cornelius sisenna","coelius antipater","afranius","aelius stilo","cinna",
    "plutarch","fronto","ulpian","cyprian","cato the younger","pomponius porphyrio",
    "papinian","maximian","martianus capella","eutropius","cassius dio","prudentius",
    "arnobius","boethius","aelius donatus","the venerable bede","lutatius catulus",
    "rutilius rufus","panaetius","coruncanius","licinius macer","quadrigarius",
    "cincius alimentus","calpurnius piso frugi","atta","quintus cicero","nigidius figulus",
    "furius bibaculus","velleius paterculus","scribonius largus","curtius rufus",
    "pomponius mela","pompeius trogus","apicius","titus labienus","strabo","josephus",
    "diodorus siculus","cremutius cordus","calpurnius siculus","asconius pedianus",
    "albinovanus pedo","testamentum porcelli","victorinus","vegetius","sulpicius severus",
    "paulus","orosius","novatian","sidonius apollinaris","aurelius victor","querolus",
    "procopius","paulinus of nola","nemesianus","galen","gaius the jurist","cassiodorus",
    "claudius claudian","tiberius claudius donatus","pervigilium veneris","p. mucius scaevola",
    "q. mucius scaevola augur","q. mucius scaevola pontifex","volusius","isidore",
    "valerius antias","lucius acilius","sulpicius gallus","titinius","quintus valerius of sora",
    "sempronius asellio","sempronius tuditanus","postumius albinus","manius manilius",
    "mago","luscius lanuvinus","gaius acilius","cato licinanus","aurelius opillus",
    "aelius paetus","rhetorica ad herennium","laevius","epidius","cornelius severus",
    "rabirius","capito","caecilius epirota","vipstanus messalla","valerius probus",
    "dio cocceianus","victor of vita","vibius sequester","vespa","venantius fortunatus",
    "rutillus namatianus","servius honoratus","scriptores historiae augustae","sammonicus",
    "salvian","rufinus of aquileia","quodvultdeus","plotius sacerdos","hostidius geta",
    "palladius","nonius marcellus","merobaudes","marcellus empiricus","juvencus",
    "julius solinus","hilary of poitiers","herodian","gregory the great","gregory of tours",
    "granius licinianus","gargilius martial","fulgentius","firmicus maternus","epictetus",
    "ennodius","dracontius","dicta catonis","dares and dictys","cyprianus gallus",
    "charisius","censorinus","cassian","caelius sedulius","avianus","paulinus of pella",
    "rufius festus","caesius bassus","sulpicius apollinaris","vennonius","santra",
    "gnaeus gellius","furius of antias","gaius fannius","cassius hemina","p. licinius tegula",
    "porcius licinius","pompilius","sextilius ena","antonius gnipho","ateius praetextatus",
    "fenestella","labeo","servilius nonianus","laus pisonis","aemilius asper",
    "remius favinus","prosper of aquitane","priscian","porfyrius","acta martyrum scillitanorum",
    "peregrinatio aetharia","modestinus","julius obsequens","julian of eclanum",
    "hegesippus","gennadius","corippus","caesellius vindex","benedict of nursia",
    "avitus","avienus","arator","ampelius","valerius aedituus","atilius","turpilius",
    "trabea","optatianus","marcus actorius naso","statius ursulus",
    "aemilius macer","grattius","amafinius","platius","gaius titius","catius",
    "popilius cleuor","musonius"
  ];
    
    function categorizeQuestion(text) {
      if (/Underworld|gods|heroes|myth/i.test(text)) return "Myth";
      if (/war|battle|Hannibal|Sulla|Marius|Sertorius|Pompey/i.test(text)) return "History";
      if (/word|Greek|grammar|verb|derivative|participle|ablative|dative|genitive|declension|subjunctive|motto|differentiate|meaning|grex|prex|nimis|nemus|ars|artus/i.test(text)) return "Language";
      for (const name of authors) {
      if (lower.includes(name)) return "Literature";
    }
      return "Uncategorized";
    }

    function isAllCaps(text) {
      const words = text.split(' ');
      const firstWord = words[0];
      const restWords = words.slice(1);
      return firstWord === firstWord.toUpperCase() && restWords.every(word => word === word.toLowerCase() || word === word.toUpperCase());
    }

function processText() {
  const inputText = document.getElementById('inputText').value;
  const lines = inputText.split("\n");
  const questions = [];

  let buffer = "";

  function pushBufferedQuestion() {
    if (!buffer) return;

    //  to split buffer into question and answer
    const match = buffer.match(/^(.*?\?)\s*(.+)$/s);
    if (match) {
      const q = match[1].trim();
      const a = match[2].trim();
      questions.push({
        category: categorizeQuestion(q),
        question: q,
        answer: a
      });
    }

    buffer = "";
  }

  for (let line of lines) {
    line = line.trim();
    if (!line || /score check/i.test(line)) continue;

    //  a new question
    if (/^\d+\.\s|^B\d:/.test(line)) {
      pushBufferedQuestion();
      buffer = line.replace(/^\d+\.\s|^B\d:\s*/, '');
    } else {
      buffer += " " + line;
    }
  }

  //  any remaining question
  pushBufferedQuestion();

  //  output
  document.getElementById('jsonOutput').textContent = JSON.stringify(questions, null, 2);
  document.getElementById('output').style.display = 'block';
}


    document.getElementById('fileInput').addEventListener('change', function(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          document.getElementById('inputText').value = e.target.result;
        };
        reader.readAsText(file);
      }
    });

    document.getElementById('processButton').addEventListener('click', processText);
  </script>
</body>
</html>
